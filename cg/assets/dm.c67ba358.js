import{e as de}from"./antd.83525965.js";import{r,c as re,a as b,o as p,b as v,d as i,e as o,w as u,F as S,f as x,t as $,u as _e,h as a,j as pe,L as me,m as F,l as ve,B as he,I as fe,p as ke,S as be,q as ge,s as Ce,P as $e}from"./vendor.ee20d017.js";const ye={class:"board"},Ue={class:"pool"},Se={class:"btn-group"},xe=a("\u5BFC\u5165\u4EBA\u7269\u5361"),Je=a("\u5BFC\u5165\u602A\u7269\u5361"),Ne={class:"pc"},Te=a(" \u4EBA\u7269\u5361\u6C60\uFF1A "),Ie=a("\u5220\u9664"),Ae={class:"monster"},we=a(" \u602A\u7269\u6C60\uFF1A "),Me=a("\u5220\u9664"),Pe={class:"btn-group"},Be=a("\u53C2\u6218"),He=a("\u5168\u9009"),Oe=a("\u5168\u4E0D\u9009"),Ee=i("div",null,[a(" \u5176\u4ED6\u53EF\u80FD\u4F1A\u7528\u5230\u7684\u6307\u4EE4\uFF1A "),i("pre",null,"sb member list -a"),i("pre",null,"sb init list -a"),i("pre",null,"sb on"),i("pre",null,"sb next"),i("pre",null,"sb pause"),i("pre",null,"sb end")],-1),je={class:"run"},Fe={class:"mem"},Le={class:"label"},Re=a(),Ve=a(" \u8840\u91CF: "),qe=a(" \u5148\u653B: "),ze=a(" \u4E34\u65F6\u751F\u547D: "),De=a(" \u6DE4\u4F24: "),Ze=a(" pc: "),Ge=a("\u589E\u52A0\u72B6\u6001"),Ke={class:"damage",style:{margin:"10px 0"}},Qe=a(" \u751F\u6210\u6307\u4EE4\uFF1A "),We=a("\u53D7\u4F24"),Xe=a("\u6CBB\u7597"),Ye=a("\u53D7\u6DE4\u4F24"),et=a("\u66F4\u65B0"),tt=a("\u5220\u9664"),nt=a(" \u72B6\u6001: "),ot=a(" \u8F6E\u6570: "),at=a("-"),lt=a("\u66F4\u65B0"),st={class:"commander"},ut=a("\u751F\u6210\u547D\u4EE4"),ct=a("\u4EA4\u6362\u5148\u653B"),it=a("\u5EF6\u8FDF"),dt=a("\u81EA\u52A8\u8DF3\u8FC7\u56DE\u5408"),rt=a("\u81EA\u52A8\u63D0\u9192"),_t=a("\u81EA\u52A8@"),pt={class:"result"},mt={class:"timer"},vt=a("\u4E0B\u56DE\u5408"),ht={class:"log"},ft={setup(A){const f=r(R()),g=r(V()),J=r(""),C=r([]);r([]),r([]);const m=r({autoReminder:!0,autoAt:!0,autoJump:!0,autoJumpTime:5,silent:!0}),y=r(0),w=r(0),M=r(0),P=r(""),B=r([]),U=r(5*60);setInterval(()=>{U.value--},1e3);const L=re(()=>{const e=Math.floor(U.value/60%60),n=Math.round(U.value%60);return e===0&&n===0&&(U.value=5*60),e+": "+n});function R(){return JSON.parse(localStorage.getItem("pc"))||[]}function V(){return JSON.parse(localStorage.getItem("monster"))||[]}function q(e){!e||(f.value.push(e),localStorage.setItem("pc",JSON.stringify(f.value)))}function z(e){f.value.splice(e,1),localStorage.setItem("pc",JSON.stringify(f.value))}function D(e){!e||(e.monster=!0,g.value.push(e),localStorage.setItem("monster",JSON.stringify(monster.value)))}function Z(e){g.value.splice(e,1),localStorage.setItem("monster",JSON.stringify(monster.value))}function H(){try{const e=me.decompress(J.value.trim(),{inputEncoding:"Base64"}),n=new de;return n.import(JSON.parse(e)),n}catch(e){F.error("\u5BFC\u5165\u51FA\u9519!\u8BE5\u6307\u7EB9\u65E0\u6548"),console.log(e,J.value)}}function G(){D(H())}function K(){q(H())}function O(e){return{name:e.name,init:0,hp:e.hp,temHp:0,nd:0,pc:null,conditions:[],monster:!!e.monster,checked:!1,origin:e}}function Q(){const e=f.value.filter(c=>c.checked).map(O),n=g.value.filter(c=>c.checked).map(O);C.value=[...C.value,...e,...n]}function E(e,n=!1){let c=`sb member ${n?"set":"add"} ${e.name} -h${e.hp}`;return Number.isInteger(e.init)&&(c+=` -i${e.init}`),e.pc&&(c+=` -q${e.pc}`),Number.isInteger(e.temHp)&&e.temHp>0&&(c+=` -t${e.temHp}`),m.value.silent&&(c+=" -s"),e.monster&&(c+=" -e"),c=[c],Number.isInteger(e.nd)&&e.nd>0&&c.push(`sb member nd ${e.name} ${e.nd}`),e.conditions&&(c=[...c,...e.conditions.map(s=>`sb member condition ${e.name} -c ${s.name} -r ${s.round}`)].filter(s=>s)),c}function W(){const{autoReminder:e,autoAt:n,autoJump:c,autoJumpTime:s}=m.value;let d=`sb row 
`+C.value.reduce((_,N)=>_.concat(E(N)),[]).join(`
`);d+=`
sb on`,e?d+=" -r":d+=" -R",c?d+=" -j":d+=" -J",n?d+=" -a":d+=" -A",d+=` -t${s}`,h(d)}function X(e){h(`sb member damage ${e.name} ${y.value}`)}function Y(e){h(`sb member heal ${e.name} ${y.value}`)}function ee(e){h(`sb member nd ${e.name} ${y.value}`)}function te(e){h(E(e,!0))}function ne(e,n){h(`sb member condition ${e.name} -c ${n.name} -r ${n.round}`)}function oe(e,n){this.mems.splice(n,1),h(`sb member delete ${e.name}`)}function h(e){Array.isArray(e)&&(e=e.join(`
`)),P.value=e,B.value.push(e)}function ae(){const[e,n]=C.value.filter(c=>c.checked);h([`sb init switch ${e.name} ${n.name}`,`sb init switch ${n.name} ${e.name}`])}function le(){const[e,n]=C.value.filter(c=>c.checked);h([`sb member delay ${e.name} ${n.name}`,`sb member delay ${n.name} ${e.name}`])}function se(){f.value.forEach(e=>e.checked=!0),g.value.forEach(e=>e.checked=!0)}function ue(){f.value.forEach(e=>e.checked=!1),g.value.forEach(e=>e.checked=!1)}return(e,n)=>{const c=b("a-textarea"),s=b("a-button"),d=b("a-checkbox"),_=b("a-input-number"),N=b("a-input"),ce=b("a-form-item"),ie=b("a-form");return p(),v("div",ye,[i("section",Ue,[o(c,{value:J.value,"onUpdate:value":n[0]||(n[0]=t=>J.value=t)},null,8,["value"]),i("div",Se,[o(s,{onClick:K},{default:u(()=>[xe]),_:1}),o(s,{onClick:G},{default:u(()=>[Je]),_:1})]),i("div",Ne,[Te,(p(!0),v(S,null,x(f.value,(t,k)=>(p(),v("div",{key:t.name},[o(d,{checked:t.checked,"onUpdate:checked":l=>t.checked=l},{default:u(()=>[a($(t.name),1)]),_:2},1032,["checked","onUpdate:checked"]),o(s,{onClick:l=>z(k),size:"small"},{default:u(()=>[Ie]),_:2},1032,["onClick"])]))),128))]),i("div",Ae,[we,(p(!0),v(S,null,x(g.value,(t,k)=>(p(),v("div",{key:t.name},[o(d,{checked:t.checked,"onUpdate:checked":l=>t.checked=l},{default:u(()=>[a($(t.name),1)]),_:2},1032,["checked","onUpdate:checked"]),o(s,{onClick:l=>Z(k),size:"small"},{default:u(()=>[Me]),_:2},1032,["onClick"])]))),128))]),i("div",Pe,[o(s,{onClick:Q,type:"primary"},{default:u(()=>[Be]),_:1}),o(s,{onClick:se},{default:u(()=>[He]),_:1}),o(s,{onClick:ue},{default:u(()=>[Oe]),_:1})]),Ee]),i("section",je,[i("div",Fe,[o(ie,null,{default:u(()=>[(p(!0),v(S,null,x(C.value,(t,k)=>(p(),pe(ce,{key:k},{default:u(()=>[i("div",Le,[i("b",null,$(t.name),1),Re,o(d,{checked:t.checked,"onUpdate:checked":l=>t.checked=l},null,8,["checked","onUpdate:checked"])]),Ve,o(_,{value:t.hp,"onUpdate:value":l=>t.hp=l},null,8,["value","onUpdate:value"]),qe,o(_,{value:t.init,"onUpdate:value":l=>t.init=l},null,8,["value","onUpdate:value"]),ze,o(_,{value:t.temHp,"onUpdate:value":l=>t.temHp=l},null,8,["value","onUpdate:value"]),De,o(_,{value:t.nd,"onUpdate:value":l=>t.nd=l},null,8,["value","onUpdate:value"]),Ze,o(N,{style:{width:"200px"},value:t.pc,"onUpdate:value":l=>t.pc=l},null,8,["value","onUpdate:value"]),o(s,{style:{"margin-left":"10px"},onClick:l=>t.conditions.push({name:"",round:0}),type:"primary"},{default:u(()=>[Ge]),_:2},1032,["onClick"]),i("div",Ke,[Qe,o(_,{value:y.value,"onUpdate:value":n[1]||(n[1]=l=>y.value=l)},null,8,["value"]),o(s,{onClick:()=>X(t)},{default:u(()=>[We]),_:2},1032,["onClick"]),o(_,{value:w.value,"onUpdate:value":n[2]||(n[2]=l=>w.value=l)},null,8,["value"]),o(s,{onClick:()=>Y(t)},{default:u(()=>[Xe]),_:2},1032,["onClick"]),o(_,{value:M.value,"onUpdate:value":n[3]||(n[3]=l=>M.value=l)},null,8,["value"]),o(s,{onClick:()=>ee(t)},{default:u(()=>[Ye]),_:2},1032,["onClick"]),o(s,{onClick:()=>te(t)},{default:u(()=>[et]),_:2},1032,["onClick"]),o(s,{danger:"",onClick:()=>oe(t,k)},{default:u(()=>[tt]),_:2},1032,["onClick"])]),(p(!0),v(S,null,x(t.conditions,(l,j)=>(p(),v("div",{style:{margin:"10px 0"},key:j},[nt,o(N,{style:{width:"200px"},value:l.name,"onUpdate:value":T=>l.name=T},null,8,["value","onUpdate:value"]),ot,o(_,{value:l.round,"onUpdate:value":T=>l.round=T},null,8,["value","onUpdate:value"]),o(s,{type:"primary",style:{"margin-left":"10px"},onClick:T=>t.conditions.splice(j,1)},{default:u(()=>[at]),_:2},1032,["onClick"]),o(s,{type:"primary",style:{"margin-left":"10px"},onClick:()=>ne(t,l)},{default:u(()=>[lt]),_:2},1032,["onClick"])]))),128))]),_:2},1024))),128))]),_:1})]),i("div",st,[o(s,{onClick:W},{default:u(()=>[ut]),_:1}),o(s,{onClick:ae},{default:u(()=>[ct]),_:1}),o(s,{onClick:le},{default:u(()=>[it]),_:1}),i("div",null,[o(d,{checked:m.value.autoJump,"onUpdate:checked":n[4]||(n[4]=t=>m.value.autoJump=t)},{default:u(()=>[dt]),_:1},8,["checked"]),o(d,{checked:m.value.autoReminder,"onUpdate:checked":n[5]||(n[5]=t=>m.value.autoReminder=t)},{default:u(()=>[rt]),_:1},8,["checked"]),o(d,{checked:m.value.autoAt,"onUpdate:checked":n[6]||(n[6]=t=>m.value.autoAt=t)},{default:u(()=>[_t]),_:1},8,["checked"]),o(_,{value:m.value.autoJumpTime,"onUpdate:value":n[7]||(n[7]=t=>m.value.autoJumpTime=t)},null,8,["value"])]),i("pre",null,$(P.value),1)])]),i("section",pt,[i("div",mt,$(_e(L)),1),o(s,{onClick:n[8]||(n[8]=t=>U.value=5*60)},{default:u(()=>[vt]),_:1}),i("div",ht,[(p(!0),v(S,null,x(B.value,(t,k)=>(p(),v("pre",{key:k},$(t),1))),128))])])])}}},kt=[he,fe,ke,be,ge,Ce,$e],I=ve(ft);kt.forEach(A=>I.use(A));I.config.globalProperties.$message=F;I.mount("#app");
