var Q=Object.defineProperty;var ee=(i,o,p)=>o in i?Q(i,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):i[o]=p;var O=(i,o,p)=>(ee(i,typeof o!="symbol"?o+"":o,p),p);import{c as classes,B as BabType,S as SaveType,a as allSkills,C as Class,s as sizes,b as aligns,d as sizeModifyMap,A as AbilityNameMap,g as getClassByName,e as Character}from"./antd.83525965.js";import{m as message,c as computed,r as ref,a as resolveComponent,o as openBlock,b as createElementBlock,d as createBaseVNode,e as createVNode,w as withCtx,F as Fragment,f as renderList,u as unref,g as createCommentVNode,h as createTextVNode,t as toDisplayString,i as watchEffect,j as createBlock,n as nextTick,k as watch,L as LZUTF8,l as createApp,A as AutoComplete,B as Button,I as Input,p as Form,S as Select,C as Collapse,M as Modal,q as Checkbox,s as InputNumber,P as Popconfirm}from"./vendor.ee20d017.js";class Template{constructor(i,o={}){O(this,"allVars",new Set);O(this,"loopVars",new Set);O(this,"buffered",[]);O(this,"opsStack",[]);this.text=i,this.context=o}parseT(i){i&&i instanceof Object&&(this.context=i);const o=new CodeBuilder;this.code=o,o.addFunction("render","doDots"),o.startBlock();const p=o.addSection();o.addLine("var result = []");const e=this.text.split(/({{.*?}}|{%.*?%}|{#.*?#})/g);for(let _ of e)if(!/^\{#/.exec(_))if(/^\{\{/.exec(_)){const v=this.exprCode(_.substring(2,_.length-2).trim());this.buffered.push(v)}else if(/^\{\%/.exec(_)){this.flushOutput();const v=_.substring(2,_.length-2).split(" ").filter(C=>C);if(v[0]==="if")this.opsStack.push("if"),o.addIf(this.exprCode(v[1])),o.startBlock();else if(v[0]==="for"){if(v.length!==4||v[2]!=="in")throw new Error("Don't understand for:"+_);this.opsStack.push("for"),this.loopVars.add(v[1]),o.addFor("c_"+v[1],this.exprCode(v[3])),o.startBlock()}else if(/^end/.exec(v[0])){if(v.length!==1)throw new Error("Don't understand end:"+_);const C=v[0].substring(3);if(this.opsStack.length===0)throw new Error("Too many ends:"+_);if(this.opsStack.pop()!==C)throw new Error("Mismatched end tag:"+C);o.endBlock()}else throw new Error("Don't understand tag:"+v[0])}else _&&this.buffered.push(this._formatStr(_));if(this.flushOutput(),this.opsStack.length>0)throw new Error("Unmatched action tag:"+this.opsStack.pop());Array.from(this.allVars.keys()).forEach(_=>{if(!this.loopVars.has(_)){let v;this.context[_]instanceof Function?v=this.context[_]:this.context instanceof Object?v=JSON.stringify(this.context[_]):v=this.context[_],p.addLine(`var c_${_}=${v}`)}}),o.addLine('return result.join("")'),o.endBlock()}render(ctx){return this.parseT(ctx),eval("("+this.code.getCode()+`)(
            function doDots(dic, ...dots) {
                let v;
                dots.forEach(d => {
                    v = dic[d]
                })
                return v
            }
        )`)}exprCode(i){let o;if(i.includes("|")){const p=i.split("|");o=this.exprCode(p[0]),p.slice(1).forEach(e=>{this._variable(e),o=`c_${e}(${o})`})}else if(i.includes(".")){let p=i.split(".");o=this.exprCode(p[0]);const e=p.splice(1).map(_=>this._formatStr(_)).join(",");o=`doDots(${o},${e})`}else this._variable(i),o="c_"+i;return o}flushOutput(){this.buffered.length===1?this.code.addLine(`result.push(${this.buffered[0]})`):this.buffered.length>1&&this.code.addLine(`result = result.concat([${this.buffered.join(",")}])`),this.buffered=[]}_variable(i){if(!/^[_a-zA-Z][_a-zA-Z0-9]*$/.exec(i))throw new Error("Not a valid name:"+i);this.allVars.add(i)}_formatStr(i){return i.replace("`","\\`"),`\`${i}\``}}class CodeBuilder{constructor(){O(this,"code",[])}startBlock(){this.code.push("{")}endBlock(){this.code.push("}")}addSection(){const o=new CodeBuilder;return this.code.push(o),o}toString(){return this.code.join("")}addFunction(o,p){this.code.push(`function ${o} (${p||""})`)}addIf(o){this.code.push(`if (${o})`)}addFor(o,p){this.code.push(`for (let ${o} of ${p})`)}addLine(o){this.code.push(o),this.code.push(`;
`)}getCode(){return this.code.join("")}}const STRENGTH_WEIGHT_MAP={1:[4,6,10],2:[7,13,20],3:[11,20,30],4:[14,26,40],5:[17,33,50],6:[21,40,60],7:[24,46,70],8:[27,53,80],9:[31,60,90],10:[34,66,100],11:[39,76,115],12:[44,86,130],13:[51,100,150],14:[59,116,175],15:[67,133,200],16:[77,153,230],17:[87,173,260],18:[101,200,300],19:[117,233,350],20:[134,266,400],21:[154,306,460],22:[174,346,520],23:[201,400,600],24:[234,466,700],25:[267,533,800],26:[307,613,920],27:[347,693,1040],28:[401,800,1200],29:[467,933,1400]};function getWeightByStr(i){if(i<30)return STRENGTH_WEIGHT_MAP[i];const o=i%10,p=Math.floor(i/10)%10;return STRENGTH_WEIGHT_MAP["2"+o].map(e=>e*4*p)}class LocalStorage{constructor(o,p){O(this,"name","");this.name=o,this.limit=p;try{this.data=JSON.parse(localStorage.getItem(o))||[]}catch(e){setTimeout(()=>{message.error("\u6570\u636E\u52A0\u8F7D\u5931\u8D25")}),console.log("error when get localStorage data",o,e)}}save(){localStorage.setItem(this.name,JSON.stringify(this.data))}delete(o){this.data.splice(o,1),this.save()}add(o){this.limit&&this.data.length>this.limit&&this.data.pop(),this.data.unshift(JSON.parse(JSON.stringify(o))),this.save()}}function useModelWrapper(i,o,p="modelValue"){return computed({get:()=>i[p],set:e=>o(`update:${p}`,e)})}const _hoisted_1$2={class:"button-group"},_hoisted_2$2=createTextVNode("\u6DFB\u52A0\u4EBA\u7269\u804C\u4E1A"),_hoisted_3$2=createTextVNode("\u6DFB\u52A0\u804C\u4E1A\u6A21\u7248"),_hoisted_4$2=createTextVNode("\u67E5\u770B\u5DF2\u6709\u804C\u4E1A\u6A21\u7248"),_hoisted_5$2=createTextVNode("\u5BFC\u51FA\u804C\u4E1A\u6A21\u7248"),_hoisted_6$2=createTextVNode("\u5BFC\u5165\u804C\u4E1A\u6A21\u7248"),_hoisted_7$2=createTextVNode("\u5220\u9664"),_hoisted_8$2=createBaseVNode("div",null,"\u6E05\u9664\u6E38\u89C8\u5668\u7F13\u5B58\u4E5F\u4F1A\u6E05\u7A7A\u804C\u4E1A\u6A21\u7248\uFF0C\u8BB0\u5F97\u5BFC\u51FA\u3002",-1),_hoisted_9$2={key:0,style:{"margin-bottom":"1rem"}},_hoisted_10$2={class:"button-group"},_hoisted_11$2=createTextVNode("\u5220\u9664"),_sfc_main$2={props:{modelValue:Object,customClass:Object},emits:["update:modelValue","addClass","select"],setup(i,{emit:o}){const p=i,e=p.customClass,_=ref(!1),v=ref(!1),C=ref(!1),V=ref({}),b=ref(""),k=computed(()=>Object.values(classes).map(f=>({label:f.name,value:f.name})).concat(e?e.data.map(f=>({label:f.name,value:f.name})):[]));useModelWrapper(p,o);function y(){V.value.isCustom=!0;const f=new Class(V.value.name,V.value);e.add(f),V.value={level:1},_.value=!1}function I(){p.modelValue.push({level:1}),o("addClass")}function g(){try{const f=new Blob([JSON.stringify(e.data)],{type:"text/plain;charset=utf-8"}),s=document.createElement("a");s.href=URL.createObjectURL(f),s.download="\u804C\u4E1A\u6A21\u7248.txt",s.click()}catch(f){message.error("\u5BFC\u51FA\u5931\u8D25\uFF01"),console.log(f,JSON.stringify(e.data))}}function h(){try{const f=JSON.parse(b.value),s=e.data.map(x=>x.name);f.forEach(x=>{s.includes(x.name)||e.add(x)}),C.value=!1}catch(f){message.error("\u5BFC\u5165\u5931\u8D25\uFF01"),console.log(f,b.value)}}return(f,s)=>{const x=resolveComponent("a-button"),w=resolveComponent("a-select"),N=resolveComponent("a-form-item"),U=resolveComponent("a-input-number"),S=resolveComponent("a-form"),G=resolveComponent("a-input"),$=resolveComponent("a-checkbox-group"),D=resolveComponent("a-modal"),M=resolveComponent("a-popconfirm"),F=resolveComponent("a-textarea");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$2,[createVNode(x,{type:"primary",onClick:I},{default:withCtx(()=>[_hoisted_2$2]),_:1}),createVNode(x,{onClick:s[0]||(s[0]=()=>_.value=!0)},{default:withCtx(()=>[_hoisted_3$2]),_:1}),createVNode(x,{onClick:s[1]||(s[1]=()=>v.value=!0)},{default:withCtx(()=>[_hoisted_4$2]),_:1}),createVNode(x,{onClick:s[2]||(s[2]=()=>g())},{default:withCtx(()=>[_hoisted_5$2]),_:1}),createVNode(x,{onClick:s[3]||(s[3]=()=>C.value=!0)},{default:withCtx(()=>[_hoisted_6$2]),_:1})]),(openBlock(!0),createElementBlock(Fragment,null,renderList(p.modelValue,(u,T)=>(openBlock(),createElementBlock("div",{key:T},[createVNode(S,{layout:"inline"},{default:withCtx(()=>[createVNode(N,{class:"cg-input__fix"},{default:withCtx(()=>[createVNode(w,{onChange:s[4]||(s[4]=B=>o("select")),value:u.name,"onUpdate:value":B=>u.name=B,"show-search":"",options:unref(k)},null,8,["value","onUpdate:value","options"])]),_:2},1024),createVNode(N,{label:"\u804C\u4E1A\u7B49\u7EA7",class:"cg-input__base_short"},{default:withCtx(()=>[createVNode(U,{value:u.level,"onUpdate:value":B=>u.level=B},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(N,null,{default:withCtx(()=>[createVNode(x,{onClick:B=>p.modelValue.splice(T,1)},{default:withCtx(()=>[_hoisted_7$2]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),createVNode(D,{visible:_.value,"onUpdate:visible":s[10]||(s[10]=u=>_.value=u),title:"\u65B0\u589E\u804C\u4E1A\u6A21\u7248",onOk:y},{default:withCtx(()=>[createVNode(S,{model:V.value},{default:withCtx(()=>[createVNode(N,{label:"\u540D\u79F0"},{default:withCtx(()=>[createVNode(G,{value:V.value.name,"onUpdate:value":s[5]||(s[5]=u=>V.value.name=u)},null,8,["value"])]),_:1}),createVNode(N,{label:"\u751F\u547D\u9AB0\u9762\u6570"},{default:withCtx(()=>[createVNode(w,{value:V.value.hitDice,"onUpdate:value":s[6]||(s[6]=u=>V.value.hitDice=u),options:[{label:"d12",value:12},{label:"d10",value:10},{label:"d8",value:8},{label:"d6",value:6},{label:"d4",value:4}]},null,8,["value"])]),_:1}),createVNode(N,{label:"bab"},{default:withCtx(()=>[createVNode(w,{value:V.value.bab,"onUpdate:value":s[7]||(s[7]=u=>V.value.bab=u),options:[{label:"\u6EE1Bab",value:unref(BabType).STRONG},{label:"0.75Bab",value:unref(BabType).MIDDLE},{label:"0.5Bab",value:unref(BabType).WEAK}]},null,8,["value","options"])]),_:1}),(openBlock(),createElementBlock(Fragment,null,renderList([["\u5F3A\u97E7\u8C41\u514D","fortSave"],["\u53CD\u5C04\u8C41\u514D","refSave"],["\u610F\u5FD7\u8C41\u514D","willSave"]],u=>createVNode(N,{key:u[1],label:u[0]},{default:withCtx(()=>[createVNode(w,{value:V.value[u[1]],"onUpdate:value":T=>V.value[u[1]]=T,options:[{label:"\u5F3A\u8C41\u514D",value:unref(SaveType).STRONG},{label:"\u5F31\u8C41\u514D",value:unref(SaveType).WEAK}]},null,8,["value","onUpdate:value","options"])]),_:2},1032,["label"])),64)),createVNode(N,{label:"\u672C\u804C\u6280\u80FD"},{default:withCtx(()=>[createVNode($,{value:V.value.skills,"onUpdate:value":s[8]||(s[8]=u=>V.value.skills=u),options:unref(allSkills).map(u=>({label:u.name,value:u.name}))},null,8,["value","options"])]),_:1}),createVNode(N,{label:"\u6BCF\u7EA7\u6280\u80FD\u70B9\u6570\uFF08\u4E0D\u542B\u667A\u529B\u52A0\u503C\uFF09"},{default:withCtx(()=>[createVNode(U,{value:V.value.skillPointsEachLevel,"onUpdate:value":s[9]||(s[9]=u=>V.value.skillPointsEachLevel=u)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"]),createVNode(D,{visible:v.value,"onUpdate:visible":s[11]||(s[11]=u=>v.value=u),title:"\u804C\u4E1A\u6A21\u7248",onOk:s[12]||(s[12]=u=>v.value=!1)},{default:withCtx(()=>[_hoisted_8$2,unref(e).data.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_9$2,"\u6CA1\u6709\u804C\u4E1A\u6A21\u7248")),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).data,(u,T)=>(openBlock(),createElementBlock("div",{class:"history-row",key:T},[createTextVNode(toDisplayString(u.name)+" ",1),createBaseVNode("div",_hoisted_10$2,[createVNode(M,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:()=>unref(e).delete(T)},{default:withCtx(()=>[createVNode(x,{size:"small",danger:""},{default:withCtx(()=>[_hoisted_11$2]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["visible"]),createVNode(D,{visible:C.value,"onUpdate:visible":s[14]||(s[14]=u=>C.value=u),title:"\u5BFC\u5165\u804C\u4E1A\u6A21\u7248",onOk:h,onCancel:s[15]||(s[15]=u=>b.value="")},{default:withCtx(()=>[createVNode(F,{value:b.value,"onUpdate:value":s[13]||(s[13]=u=>b.value=u)},null,8,["value"])]),_:1},8,["visible"])],64)}}};var Card_vue_vue_type_style_index_0_lang="";const _hoisted_1$1=createTextVNode("\u5C3A"),_hoisted_2$1=createTextVNode("\u78C5"),_hoisted_3$1={class:"number__result"},_hoisted_4$1=createTextVNode("= "),_hoisted_5$1={class:"number__result"},_hoisted_6$1=createTextVNode("= "),_hoisted_7$1=createTextVNode("\u521D\u59CB\u503C + "),_hoisted_8$1=createTextVNode("\u79CD\u65CF\u8C03\u6574 + "),_hoisted_9$1=createTextVNode("\u5176\u5B83\u8C03\u6574 "),_hoisted_10$1={class:"number__result"},_hoisted_11$1=createTextVNode("= "),_hoisted_12$1=createTextVNode("\u521D\u59CB\u503C + "),_hoisted_13=createTextVNode("\u79CD\u65CF\u8C03\u6574 + "),_hoisted_14=createTextVNode("\u5176\u5B83\u8C03\u6574 "),_hoisted_15={class:"number__result"},_hoisted_16=createTextVNode("= "),_hoisted_17=createTextVNode("\u521D\u59CB\u503C + "),_hoisted_18=createTextVNode("\u79CD\u65CF\u8C03\u6574 + "),_hoisted_19=createTextVNode("\u5176\u5B83\u8C03\u6574 "),_hoisted_20={class:"number__result"},_hoisted_21=createTextVNode("= "),_hoisted_22=createTextVNode("\u521D\u59CB\u503C + "),_hoisted_23=createTextVNode("\u79CD\u65CF\u8C03\u6574 + "),_hoisted_24=createTextVNode("\u5176\u5B83\u8C03\u6574 "),_hoisted_25={class:"number__result"},_hoisted_26=createTextVNode("= "),_hoisted_27=createTextVNode("\u521D\u59CB\u503C + "),_hoisted_28=createTextVNode("\u79CD\u65CF\u8C03\u6574 + "),_hoisted_29=createTextVNode("\u5176\u5B83\u8C03\u6574 "),_hoisted_30={class:"number__result"},_hoisted_31=createTextVNode("= "),_hoisted_32=createTextVNode("\u521D\u59CB\u503C + "),_hoisted_33=createTextVNode("\u79CD\u65CF\u8C03\u6574 + "),_hoisted_34=createTextVNode("\u5176\u5B83\u8C03\u6574 "),_hoisted_35={class:"number__result"},_hoisted_36={class:"number__result"},_hoisted_37=createTextVNode(" = "),_hoisted_38=createBaseVNode("span",{class:"number__common"},"10",-1),_hoisted_39=createTextVNode("+ "),_hoisted_40=createTextVNode("\u76D4\u7532\u53CA\u76FE\u724C+ "),_hoisted_41=createTextVNode("\u654F\u6377+ "),_hoisted_42=createTextVNode("\u5176\u5B83 "),_hoisted_43=createBaseVNode("br",null,null,-1),_hoisted_44=createTextVNode(" \u63A5\u89E6\uFF1A"),_hoisted_45={class:"number__common"},_hoisted_46=createTextVNode(" \u63AA\u624B\u4E0D\u53CA\uFF1A"),_hoisted_47={class:"number__common"},_hoisted_48={class:"number__result"},_hoisted_49=createTextVNode("="),_hoisted_50={class:"number__common"},_hoisted_51=createTextVNode("\u654F\u6377 +"),_hoisted_52=createTextVNode("\u5176\u5B83 "),_hoisted_53={class:"number__result"},_hoisted_54=createTextVNode(" = "),_hoisted_55={class:"number__common"},_hoisted_56=createTextVNode("bab + "),_hoisted_57={class:"number__common"},_hoisted_58=createTextVNode("\u529B\u91CF + "),_hoisted_59={class:"number__common"},_hoisted_60=createTextVNode("\u4F53\u578B + "),_hoisted_61=createTextVNode("\u5176\u5B83 "),_hoisted_62={class:"number__result"},_hoisted_63=createTextVNode(" = "),_hoisted_64={class:"number__common"},_hoisted_65=createTextVNode("\u57FA\u7840 + "),_hoisted_66=createTextVNode("\u5176\u5B83 "),_hoisted_67={class:"number__result"},_hoisted_68=createTextVNode(" = "),_hoisted_69={class:"number__common"},_hoisted_70=createTextVNode("\u57FA\u7840 + "),_hoisted_71=createTextVNode("\u5176\u5B83"),_hoisted_72={class:"number__result"},_hoisted_73=createTextVNode(" = "),_hoisted_74={class:"number__common"},_hoisted_75=createTextVNode("\u57FA\u7840 + "),_hoisted_76=createTextVNode("\u5176\u5B83"),_hoisted_77=createTextVNode(" \u5954\u8DD1"),_hoisted_78=createTextVNode("%"),_hoisted_79=createTextVNode("\u5C3A"),_hoisted_80=createTextVNode("\u672C\u804C\u6280\u80FD"),_hoisted_81={class:"number__result"},_hoisted_82=createTextVNode(" = "),_hoisted_83={key:0,class:"number__common"},_hoisted_84=createTextVNode(" + "),_hoisted_85={class:"number__common"},_hoisted_86=createTextVNode("\u5176\u5B83 "),_hoisted_87={class:"number__common"},_hoisted_88={class:"number__result"},_hoisted_89=createTextVNode("\u679A\uFF0C "),_hoisted_90={class:"number__result"},_hoisted_91=createTextVNode("gp\uFF0C "),_hoisted_92={class:"number__result"},_hoisted_93=createTextVNode("\u78C5 "),_hoisted_94={class:"number__result"},_hoisted_95=createBaseVNode("br",null,null,-1),_hoisted_96=createTextVNode(" \u8F7B\u8F7D\uFF1A"),_hoisted_97={class:"number__common"},_hoisted_98=createTextVNode(" \u4E2D\u8F7D\uFF1A"),_hoisted_99={class:"number__common"},_hoisted_100=createTextVNode(" \u91CD\u8F7D\uFF1A"),_hoisted_101={class:"number__common"},_sfc_main$1={props:{modelValue:Object},emits:["update:modelValue"],setup(i,{emit:o}){const e=useModelWrapper(i,o),_=computed(()=>({STRENGTH:e.value.STRENGTH.modify,DEXTERITY:e.value.DEXTERITY.modify,CONSTITUTION:e.value.CONSTITUTION.modify,INTELLIGENCE:e.value.INTELLIGENCE.modify,WISDOM:e.value.WISDOM.modify,CHARISMA:e.value.CHARISMA.modify})),v=ref(["base","class","abilities","skills","fates","traits","items","spells","attacks","armors"]),C=ref(new LocalStorage("customClass"));function V(n){if(!n.name)return null;const a=n.level;if(!(n instanceof Class)){let c=C.value.data.find(l=>l.name===n.name)||e.value.customClass.find(l=>l.name===n.name);c?n=c:n=getClassByName(n.name)}return n||message.error("\u83B7\u53D6\u804C\u4E1A\u4FE1\u606F\u5931\u8D25\uFF01\u8BF7\u8054\u7CFB\u5F00\u53D1\u8005"),n.level=a,n}const b=computed(()=>e.value.class.filter(n=>n.name).map(n=>V(n))),k=computed(()=>b.value.reduce((n,a)=>n+a.level,0));function y(n,a){if(n===SaveType.STRONG)return Math.floor((a*5+20)/10);if(n===SaveType.WEAK)return Math.floor(a/3)}const I=n=>computed(()=>b.value.reduce((a,c)=>c?a+y(c[n],c.level):a,0)),g=computed(()=>b.value.reduce((n,a)=>a?n+Math.floor(a.level*a.bab):n,0)),h=I("fortSave"),f=I("refSave"),s=I("willSave"),x=computed(()=>h.value+e.value.otherFortSave+e.value.CONSTITUTION.modify),w=computed(()=>f.value+e.value.otherRefSave+e.value.DEXTERITY.modify),N=computed(()=>s.value+e.value.otherWillSave+e.value.WISDOM.modify),U=computed(()=>b.value.reduce((n,a)=>n+a.level||0,3)),S=computed({get:()=>e.value.classSkills,set:n=>e.value.classSkills=n}),G=function(){nextTick(()=>{S.value={},b.value.forEach(n=>{n.skills.forEach(a=>!(a in S.value)&&(S.value[a.name]=!0))})})},$=computed(()=>{let n=0,a=b.value.slice(),c=a.shift();if(c)n=(c.skillPointsEachLevel+_.value.INTELLIGENCE+e.value.raceSkillPoint)*(c.level+3);else return 0;return a.forEach(l=>{n+=(l.skillPointsEachLevel+_.value.INTELLIGENCE+e.value.raceSkillPoint)*l.level}),n}),D=computed(()=>Object.values(e.value.skills).reduce((n,a)=>n+a.point,0)),M=computed(()=>{const n=e.value.class.reduce((a,c)=>c.level+a,0);return Math.round(500*n*n+1500*n+1e3)});function F(n,a){$.value-D.value<0&&(message.error("\u6CA1\u6709\u6280\u80FD\u70B9\u4E86"),e.value.skills[a.name].point=n-1)}const u=(n,a)=>{watch(n,()=>{n.find(c=>!c[a])||n.push({})},{deep:!0})};u(e.value.fates,"name"),u(e.value.traits,"name"),u(e.value.items,"name"),u(e.value.spells,"spell"),u(e.value.attacks,"name"),u(e.value.armors,"name");const T=computed(()=>getWeightByStr(e.value.STRENGTH.ability)),B=computed(()=>((e.value.pp+e.value.gp+e.value.sp+e.value.cp)/50).toFixed(2)),L=computed(()=>(e.value.items.reduce((n,a)=>n+ +(a.weight*a.count||0),0)+ +B.value).toFixed(2)),H=computed(()=>L.value<T.value[0]?"\u8F7B\u8F7D":L.value<=T.value[1]?"\u4E2D\u8F7D":L.value<=T.value[2]?"\u91CD\u8F7D":"\u8D85\u91CD"),W=computed(()=>(e.value.classHitPoint||0)+e.value.CONSTITUTION.modify*k.value),P=computed(()=>e.value.ac.armor+e.value.ac.dex+e.value.ac.other+10),j=computed(()=>e.value.ac.dex+10),X=computed(()=>e.value.ac.armor+10+e.value.ac.other),Y=computed(()=>e.value.otherInit+e.value.DEXTERITY.modify),z=computed(()=>sizeModifyMap[e.value.size]*4+e.value.STRENGTH.modify+g.value+e.value.otherGrab);return watchEffect(()=>{const n={bab:g,fortSave:h,refSave:f,willSave:s,skillMax:U,skillPoints:$,usedSkillPoints:D,levelUpExp:M,weightLimit:T,coinWeight:B,weight:L,weightDetail:H,level:k,hitPoint:W,totalAc:P,touchAc:j,flatFootAc:X,init:Y,grab:z,totalFortSave:x,totalRefSave:w,totalWillSave:N,classSkills:S,abilityModifiers:_,weightLimit:T};Object.keys(n).forEach(c=>e.value.set(c,n[c].value));const a=b.value.filter(c=>c.isCustom);a.length&&(e.value.customClass=a)}),(n,a)=>{const c=resolveComponent("a-input"),l=resolveComponent("a-form-item"),J=resolveComponent("a-select-option"),K=resolveComponent("a-select"),r=resolveComponent("a-input-number"),R=resolveComponent("a-form"),E=resolveComponent("a-collapse-panel"),Z=resolveComponent("a-checkbox"),A=resolveComponent("a-textarea"),q=resolveComponent("a-collapse");return openBlock(),createBlock(q,{activeKey:v.value,"onUpdate:activeKey":a[43]||(a[43]=t=>v.value=t)},{default:withCtx(()=>[createVNode(E,{key:"base",header:"\u57FA\u7840\u4FE1\u606F"},{default:withCtx(()=>[createVNode(R,{model:unref(e),layout:"inline"},{default:withCtx(()=>[createVNode(l,{label:"\u59D3\u540D",class:"cg-input__base"},{default:withCtx(()=>[createVNode(c,{value:unref(e).name,"onUpdate:value":a[0]||(a[0]=t=>unref(e).name=t)},null,8,["value"])]),_:1}),createVNode(l,{label:"\u79CD\u65CF",class:"cg-input__base"},{default:withCtx(()=>[createVNode(c,{value:unref(e).race,"onUpdate:value":a[1]||(a[1]=t=>unref(e).race=t)},null,8,["value"])]),_:1}),createVNode(l,{label:"\u4F53\u578B",class:"cg-input__fix"},{default:withCtx(()=>[createVNode(K,{value:unref(e).size,"onUpdate:value":a[2]||(a[2]=t=>unref(e).size=t)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(sizes),t=>(openBlock(),createBlock(J,{key:t.value,value:t.value},{default:withCtx(()=>[createTextVNode(toDisplayString(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),createVNode(l,{label:"\u6027\u522B",class:"cg-input__base"},{default:withCtx(()=>[createVNode(c,{value:unref(e).sex,"onUpdate:value":a[3]||(a[3]=t=>unref(e).sex=t)},null,8,["value"])]),_:1}),createVNode(l,{label:"\u5E74\u9F84",class:"cg-input__base"},{default:withCtx(()=>[createVNode(c,{value:unref(e).age,"onUpdate:value":a[4]||(a[4]=t=>unref(e).age=t)},null,8,["value"])]),_:1}),createVNode(l,{label:"\u9635\u8425",class:"cg-input__fix"},{default:withCtx(()=>[createVNode(K,{value:unref(e).align,"onUpdate:value":a[5]||(a[5]=t=>unref(e).align=t)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(aligns),t=>(openBlock(),createBlock(J,{key:t.value,value:t.value},{default:withCtx(()=>[createTextVNode(toDisplayString(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1}),createVNode(l,{label:"\u7ECF\u9A8C",class:"cg-input__base exp"},{default:withCtx(()=>[createVNode(c,{value:unref(e).exp,"onUpdate:value":a[6]||(a[6]=t=>unref(e).exp=t)},null,8,["value"]),createTextVNode("/"+toDisplayString(unref(M)),1)]),_:1}),createVNode(l,{label:"\u8EAB\u9AD8"},{default:withCtx(()=>[createVNode(r,{value:unref(e).height,"onUpdate:value":a[7]||(a[7]=t=>unref(e).height=t),step:"0.1"},null,8,["value"]),_hoisted_1$1]),_:1}),createVNode(l,{label:"\u4F53\u91CD"},{default:withCtx(()=>[createVNode(r,{value:unref(e).selfWeight,"onUpdate:value":a[8]||(a[8]=t=>unref(e).selfWeight=t)},null,8,["value"]),_hoisted_2$1]),_:1}),createVNode(l,{label:"\u4FE1\u4EF0",class:"cg-input__base"},{default:withCtx(()=>[createVNode(c,{value:unref(e).religion,"onUpdate:value":a[9]||(a[9]=t=>unref(e).religion=t)},null,8,["value"])]),_:1}),createVNode(l,{label:"\u8BED\u8A00",class:"cg-input__base_long"},{default:withCtx(()=>[createVNode(c,{value:unref(e).language,"onUpdate:value":a[10]||(a[10]=t=>unref(e).language=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),createVNode(E,{key:"class",header:"\u804C\u4E1A"},{default:withCtx(()=>[createVNode(_sfc_main$2,{modelValue:unref(e).class,"onUpdate:modelValue":a[11]||(a[11]=t=>unref(e).class=t),"custom-class":C.value,onSelect:G},null,8,["modelValue","custom-class"])]),_:1}),createVNode(E,{key:"abilities",header:"\u5C5E\u6027"},{default:withCtx(()=>[createVNode(R,{model:unref(e)},{default:withCtx(()=>[createVNode(l,{label:"\u751F\u547D\u503C"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_3$1,toDisplayString(unref(W)),1),_hoisted_4$1,createVNode(r,{value:unref(e).classHitPoint,"onUpdate:value":a[12]||(a[12]=t=>unref(e).classHitPoint=t)},null,8,["value"]),createTextVNode(toDisplayString(unref(b).length?"("+unref(b).reduce((t,m)=>t+`${m.level}d${m.hitDice}+`,"").slice(0,-1)+")":"")+toDisplayString(unref(e).CONSTITUTION.modify?`+${unref(e).CONSTITUTION.modify}*${unref(k)}`:""),1)]),_:1}),createVNode(l,{label:"\u529B\u91CF"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_5$1,toDisplayString(unref(e).STRENGTH.ability),1),_hoisted_6$1,createVNode(r,{value:unref(e).STRENGTH.base,"onUpdate:value":a[13]||(a[13]=t=>unref(e).STRENGTH.base=t)},null,8,["value"]),_hoisted_7$1,createVNode(r,{value:unref(e).STRENGTH.race,"onUpdate:value":a[14]||(a[14]=t=>unref(e).STRENGTH.race=t)},null,8,["value"]),_hoisted_8$1,createVNode(r,{value:unref(e).STRENGTH.other,"onUpdate:value":a[15]||(a[15]=t=>unref(e).STRENGTH.other=t)},null,8,["value"]),_hoisted_9$1]),_:1}),createVNode(l,{label:"\u654F\u6377"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_10$1,toDisplayString(unref(e).DEXTERITY.ability),1),_hoisted_11$1,createVNode(r,{value:unref(e).DEXTERITY.base,"onUpdate:value":a[16]||(a[16]=t=>unref(e).DEXTERITY.base=t)},null,8,["value"]),_hoisted_12$1,createVNode(r,{value:unref(e).DEXTERITY.race,"onUpdate:value":a[17]||(a[17]=t=>unref(e).DEXTERITY.race=t)},null,8,["value"]),_hoisted_13,createVNode(r,{value:unref(e).DEXTERITY.other,"onUpdate:value":a[18]||(a[18]=t=>unref(e).DEXTERITY.other=t)},null,8,["value"]),_hoisted_14]),_:1}),createVNode(l,{label:"\u4F53\u8D28"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_15,toDisplayString(unref(e).CONSTITUTION.ability),1),_hoisted_16,createVNode(r,{value:unref(e).CONSTITUTION.base,"onUpdate:value":a[19]||(a[19]=t=>unref(e).CONSTITUTION.base=t)},null,8,["value"]),_hoisted_17,createVNode(r,{value:unref(e).CONSTITUTION.race,"onUpdate:value":a[20]||(a[20]=t=>unref(e).CONSTITUTION.race=t)},null,8,["value"]),_hoisted_18,createVNode(r,{value:unref(e).CONSTITUTION.other,"onUpdate:value":a[21]||(a[21]=t=>unref(e).CONSTITUTION.other=t)},null,8,["value"]),_hoisted_19]),_:1}),createVNode(l,{label:"\u667A\u529B"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_20,toDisplayString(unref(e).INTELLIGENCE.ability),1),_hoisted_21,createVNode(r,{value:unref(e).INTELLIGENCE.base,"onUpdate:value":a[22]||(a[22]=t=>unref(e).INTELLIGENCE.base=t)},null,8,["value"]),_hoisted_22,createVNode(r,{value:unref(e).INTELLIGENCE.race,"onUpdate:value":a[23]||(a[23]=t=>unref(e).INTELLIGENCE.race=t)},null,8,["value"]),_hoisted_23,createVNode(r,{value:unref(e).INTELLIGENCE.other,"onUpdate:value":a[24]||(a[24]=t=>unref(e).INTELLIGENCE.other=t)},null,8,["value"]),_hoisted_24]),_:1}),createVNode(l,{label:"\u611F\u77E5"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_25,toDisplayString(unref(e).WISDOM.ability),1),_hoisted_26,createVNode(r,{value:unref(e).WISDOM.base,"onUpdate:value":a[25]||(a[25]=t=>unref(e).WISDOM.base=t)},null,8,["value"]),_hoisted_27,createVNode(r,{value:unref(e).WISDOM.race,"onUpdate:value":a[26]||(a[26]=t=>unref(e).WISDOM.race=t)},null,8,["value"]),_hoisted_28,createVNode(r,{value:unref(e).WISDOM.other,"onUpdate:value":a[27]||(a[27]=t=>unref(e).WISDOM.other=t)},null,8,["value"]),_hoisted_29]),_:1}),createVNode(l,{label:"\u9B45\u529B"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_30,toDisplayString(unref(e).CHARISMA.ability),1),_hoisted_31,createVNode(r,{value:unref(e).CHARISMA.base,"onUpdate:value":a[28]||(a[28]=t=>unref(e).CHARISMA.base=t)},null,8,["value"]),_hoisted_32,createVNode(r,{value:unref(e).CHARISMA.race,"onUpdate:value":a[29]||(a[29]=t=>unref(e).CHARISMA.race=t)},null,8,["value"]),_hoisted_33,createVNode(r,{value:unref(e).CHARISMA.other,"onUpdate:value":a[30]||(a[30]=t=>unref(e).CHARISMA.other=t)},null,8,["value"]),_hoisted_34]),_:1}),createVNode(l,{label:"bab"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_35,toDisplayString(unref(g)),1)]),_:1}),createVNode(l,{label:"ac"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_36,toDisplayString(unref(P)),1),_hoisted_37,_hoisted_38,_hoisted_39,createVNode(r,{value:unref(e).ac.armor,"onUpdate:value":a[31]||(a[31]=t=>unref(e).ac.armor=t)},null,8,["value"]),_hoisted_40,createVNode(r,{value:unref(e).ac.dex,"onUpdate:value":a[32]||(a[32]=t=>unref(e).ac.dex=t)},null,8,["value"]),_hoisted_41,createVNode(r,{value:unref(e).ac.other,"onUpdate:value":a[33]||(a[33]=t=>unref(e).ac.other=t)},null,8,["value"]),_hoisted_42,_hoisted_43,_hoisted_44,createBaseVNode("span",_hoisted_45,toDisplayString(unref(j)),1),_hoisted_46,createBaseVNode("span",_hoisted_47,toDisplayString(unref(X)),1)]),_:1}),createVNode(l,{label:"\u5148\u653B"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_48,toDisplayString(unref(Y)),1),_hoisted_49,createBaseVNode("span",_hoisted_50,toDisplayString(unref(e).DEXTERITY.modify),1),_hoisted_51,createVNode(r,{value:unref(e).otherInit,"onUpdate:value":a[34]||(a[34]=t=>unref(e).otherInit=t)},null,8,["value"]),_hoisted_52]),_:1}),createVNode(l,{label:"\u64D2\u62B1"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_53,toDisplayString(unref(z)),1),_hoisted_54,createBaseVNode("span",_hoisted_55,toDisplayString(unref(g)),1),_hoisted_56,createBaseVNode("span",_hoisted_57,toDisplayString(unref(e).STRENGTH.modify),1),_hoisted_58,createBaseVNode("span",_hoisted_59,toDisplayString(unref(sizeModifyMap)[unref(e).size]*4),1),_hoisted_60,createVNode(r,{value:unref(e).otherGrab,"onUpdate:value":a[35]||(a[35]=t=>unref(e).otherGrab=t)},null,8,["value"]),_hoisted_61]),_:1}),createVNode(l,{label:"\u5F3A\u97E7\u8C41\u514D"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_62,toDisplayString(unref(x)),1),_hoisted_63,createBaseVNode("span",_hoisted_64,toDisplayString(unref(h)),1),_hoisted_65,createVNode(r,{value:unref(e).otherFortSave,"onUpdate:value":a[36]||(a[36]=t=>unref(e).otherFortSave=t)},null,8,["value"]),_hoisted_66]),_:1}),createVNode(l,{label:"\u53CD\u5C04\u8C41\u514D"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_67,toDisplayString(unref(w)),1),_hoisted_68,createBaseVNode("span",_hoisted_69,toDisplayString(unref(f)),1),_hoisted_70,createVNode(r,{value:unref(e).otherRefSave,"onUpdate:value":a[37]||(a[37]=t=>unref(e).otherRefSave=t)},null,8,["value"]),_hoisted_71]),_:1}),createVNode(l,{label:"\u610F\u5FD7\u8C41\u514D"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_72,toDisplayString(unref(N)),1),_hoisted_73,createBaseVNode("span",_hoisted_74,toDisplayString(unref(s)),1),_hoisted_75,createVNode(r,{value:unref(e).otherWillSave,"onUpdate:value":a[38]||(a[38]=t=>unref(e).otherWillSave=t)},null,8,["value"]),_hoisted_76]),_:1}),createVNode(l,{label:"\u901F\u5EA6"},{default:withCtx(()=>[createVNode(r,{value:unref(e).speed,"onUpdate:value":a[39]||(a[39]=t=>unref(e).speed=t)},null,8,["value"]),_hoisted_77,createVNode(r,{value:unref(e).runSpeed,"onUpdate:value":a[40]||(a[40]=t=>unref(e).runSpeed=t)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),createVNode(E,{key:"attacks",header:"\u653B\u51FB"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).attacks,(t,m)=>(openBlock(),createBlock(R,{layout:"inline",key:m},{default:withCtx(()=>[createVNode(l,{class:"cg-input__base",label:"\u6B66\u5668"},{default:withCtx(()=>[createVNode(c,{placeholder:"\u6B66\u5668",value:t.name,"onUpdate:value":d=>t.name=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{class:"cg-input__base",label:"\u653B\u51FB\u68C0\u5B9A"},{default:withCtx(()=>[createVNode(c,{placeholder:"\u653B\u51FB\u68C0\u5B9A",value:t.attackRoll,"onUpdate:value":d=>t.attackRoll=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{class:"cg-input__base",label:"\u4F24\u5BB3\u9AB0"},{default:withCtx(()=>[createVNode(c,{placeholder:"\u4F24\u5BB3\u9AB0",value:t.damage,"onUpdate:value":d=>t.damage=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{class:"cg-input__base",label:"\u91CD\u51FB"},{default:withCtx(()=>[createVNode(c,{placeholder:"\u91CD\u51FB",value:t.critical,"onUpdate:value":d=>t.critical=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u5C04\u7A0B"},{default:withCtx(()=>[createVNode(r,{value:t.range,"onUpdate:value":d=>t.range=d},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),createVNode(E,{key:"armors",header:"\u76D4\u7532",class:"section__armor"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).armors,(t,m)=>(openBlock(),createBlock(R,{layout:"inline",key:m},{default:withCtx(()=>[createVNode(l,{label:"\u540D\u79F0"},{default:withCtx(()=>[createVNode(c,{value:t.name,"onUpdate:value":d=>t.name=d,style:{width:"6rem"}},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u76D4\u7532\u548C\u76FE\u724C\u52A0\u503C"},{default:withCtx(()=>[createVNode(r,{value:t.bonus,"onUpdate:value":d=>t.bonus=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u6700\u5927\u654F\u6377\u52A0\u503C"},{default:withCtx(()=>[createVNode(r,{value:t.maxDex,"onUpdate:value":d=>t.maxDex=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u9632\u5177\u68C0\u5B9A\u51CF\u503C"},{default:withCtx(()=>[createVNode(r,{value:t.checkPenalty,"onUpdate:value":d=>t.checkPenalty=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u5965\u672F\u5931\u8D25\u51E0\u7387"},{default:withCtx(()=>[createVNode(r,{value:t.arcaneFailure,"onUpdate:value":d=>t.arcaneFailure=d},null,8,["value","onUpdate:value"]),_hoisted_78]),_:2},1024),createVNode(l,{label:"\u901F\u5EA6"},{default:withCtx(()=>[createVNode(r,{value:t.speed,"onUpdate:value":d=>t.speed=d},null,8,["value","onUpdate:value"]),_hoisted_79]),_:2},1024)]),_:2},1024))),128))]),_:1}),createVNode(E,{class:"section__skills",key:"skills",header:"\u6280\u80FD"},{default:withCtx(()=>[createVNode(l,{label:"\u79CD\u65CF\u5956\u52B1\u6280\u80FD\u70B9"},{default:withCtx(()=>[createVNode(r,{value:unref(e).raceSkillPoint,"onUpdate:value":a[41]||(a[41]=t=>unref(e).raceSkillPoint=t),min:0},null,8,["value"])]),_:1}),createVNode(l,{label:"\u76D4\u7532\u51CF\u503C"},{default:withCtx(()=>[createVNode(r,{value:unref(e).armorSkillModify,"onUpdate:value":a[42]||(a[42]=t=>unref(e).armorSkillModify=t),min:0},null,8,["value"])]),_:1}),createVNode(l,null,{default:withCtx(()=>[createTextVNode("\u5269\u4F59\u6280\u80FD\u70B9\u6570\uFF1A"+toDisplayString(unref($)-unref(D))+"/"+toDisplayString(unref($)),1)]),_:1}),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(allSkills),t=>(openBlock(),createBlock(l,{key:t.name,label:t.name},{default:withCtx(()=>[createVNode(Z,{checked:unref(S)[t.name],"onUpdate:checked":m=>unref(S)[t.name]=m},{default:withCtx(()=>[_hoisted_80]),_:2},1032,["checked","onUpdate:checked"]),createBaseVNode("span",_hoisted_81,toDisplayString(t.getPoint(unref(_),unref(e).skills[t.name],unref(S)[t.name],unref(e).armorSkillModify)),1),_hoisted_82,createVNode(r,{value:unref(e).skills[t.name].point,"onUpdate:value":m=>unref(e).skills[t.name].point=m,onChange:m=>F(m,t),max:unref(U),min:0},null,8,["value","onUpdate:value","onChange","max"]),unref(e).skills[t.name].point?(openBlock(),createElementBlock("span",_hoisted_83,"("+toDisplayString(t.name in unref(S)&&unref(S)[t.name]?unref(e).skills[t.name].point:Math.floor(unref(e).skills[t.name].point/2))+")",1)):createCommentVNode("",!0),_hoisted_84,createBaseVNode("span",_hoisted_85,toDisplayString(unref(_)[t.baseAbility]),1),createTextVNode(toDisplayString(unref(AbilityNameMap)[t.baseAbility])+" + ",1),createVNode(r,{value:unref(e).skills[t.name].other,"onUpdate:value":m=>unref(e).skills[t.name].other=m},null,8,["value","onUpdate:value"]),_hoisted_86,createBaseVNode("span",_hoisted_87,toDisplayString(t.armor?`- ${t.armor*unref(e).armorSkillModify}`:""),1),createTextVNode(toDisplayString(t.armor?"\u76D4\u7532\u51CF\u503C":""),1)]),_:2},1032,["label"]))),128))]),_:1}),createVNode(E,{key:"fates",header:"\u4E13\u957F"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).fates,(t,m)=>(openBlock(),createBlock(l,{class:"section-content__item",key:m},{default:withCtx(()=>[createVNode(c,{placeholder:"\u4E13\u957F\u540D",value:t.name,"onUpdate:value":d=>t.name=d},null,8,["value","onUpdate:value"]),createVNode(A,{placeholder:"\u4E13\u957F\u63CF\u8FF0(\u975E\u5FC5\u586B)",value:t.describe,"onUpdate:value":d=>t.describe=d},null,8,["value","onUpdate:value"])]),_:2},1024))),128))]),_:1}),createVNode(E,{key:"traits",header:"\u79CD\u65CF\u7279\u6027\u4E0E\u804C\u4E1A\u80FD\u529B"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).traits,(t,m)=>(openBlock(),createBlock(l,{class:"section-content__item",key:m},{default:withCtx(()=>[createVNode(c,{placeholder:"\u7279\u6027",value:t.name,"onUpdate:value":d=>t.name=d},null,8,["value","onUpdate:value"]),createVNode(A,{placeholder:"\u63CF\u8FF0(\u975E\u5FC5\u586B)",value:t.describe,"onUpdate:value":d=>t.describe=d},null,8,["value","onUpdate:value"])]),_:2},1024))),128))]),_:1}),createVNode(E,{key:"items",header:"\u7269\u54C1"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).items,(t,m)=>(openBlock(),createBlock(R,{layout:"inline",key:m},{default:withCtx(()=>[createVNode(l,{label:"\u7269\u54C1\u540D\u79F0"},{default:withCtx(()=>[createVNode(c,{value:t.name,"onUpdate:value":d=>t.name=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u6570\u91CF"},{default:withCtx(()=>[createVNode(r,{value:t.count,"onUpdate:value":d=>t.count=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u4EF7\u683C"},{default:withCtx(()=>[createVNode(c,{value:t.price,"onUpdate:value":d=>t.price=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u91CD\u91CF"},{default:withCtx(()=>[createVNode(c,{value:t.weight,"onUpdate:value":d=>t.weight=d},null,8,["value","onUpdate:value"])]),_:2},1024),createVNode(l,{label:"\u5907\u6CE8",style:{width:"100%"}},{default:withCtx(()=>[createVNode(A,{value:t.remark,"onUpdate:value":d=>t.remark=d},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024))),128)),(openBlock(),createElementBlock(Fragment,null,renderList(["pp","gp","sp","cp"],t=>createVNode(l,{style:{"margin-top":"1rem"},label:t,key:t},{default:withCtx(()=>[createVNode(r,{min:0,value:unref(e)[t],"onUpdate:value":m=>unref(e)[t]=m},null,8,["value","onUpdate:value"])]),_:2},1032,["label"])),64)),createVNode(l,{label:"\u8D27\u5E01"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_88,toDisplayString(unref(e).pp+unref(e).gp+unref(e).sp+unref(e).cp),1),_hoisted_89,createBaseVNode("span",_hoisted_90,toDisplayString((unref(e).pp*10+unref(e).gp+unref(e).sp/10+unref(e).cp/100).toFixed(2)),1),_hoisted_91,createBaseVNode("span",_hoisted_92,toDisplayString(unref(B)),1),_hoisted_93]),_:1}),createVNode(l,{label:"\u8D1F\u91CD"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_94,toDisplayString(unref(L))+"\u78C5, "+toDisplayString(unref(H)),1),_hoisted_95]),_:1}),createVNode(l,null,{default:withCtx(()=>[_hoisted_96,createBaseVNode("span",_hoisted_97,toDisplayString("<"+unref(T)[0]),1),_hoisted_98,createBaseVNode("span",_hoisted_99,toDisplayString("<"+(unref(T)[1]+1)),1),_hoisted_100,createBaseVNode("span",_hoisted_101,toDisplayString("<"+(unref(T)[2]+1)),1)]),_:1})]),_:1}),createVNode(E,{key:"spells",header:"\u6CD5\u672F"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).spells,(t,m)=>(openBlock(),createBlock(l,{key:m},{default:withCtx(()=>[createTextVNode(toDisplayString(m)+"\u73AF\uFF1A",1),createVNode(A,{value:t.spell,"onUpdate:value":d=>t.spell=d},null,8,["value","onUpdate:value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["activeKey"])}}};var App_vue_vue_type_style_index_0_lang="";const _hoisted_1={class:"nav"},_hoisted_2={class:"button-group"},_hoisted_3=createTextVNode("\u751F\u6210\u4EBA\u7269\u5361"),_hoisted_4=createTextVNode("\u5386\u53F2\u4EBA\u7269\u5361"),_hoisted_5=createTextVNode("\u4ECE\u6307\u7EB9\u5BFC\u5165\u4EBA\u7269\u5361"),_hoisted_6=createTextVNode(" D&D 3.5 \u4EBA\u7269\u5361\u751F\u6210\u5668 "),_hoisted_7={class:"wrapper"},_hoisted_8=createBaseVNode("div",{style:{"margin-bottom":"1rem"}},"\u6700\u591A\u4FDD\u5B5820\u5F20\u3002\u4E00\u65E6\u6E05\u9664\u6E38\u89C8\u5668\u7F13\u5B58\u4FBF\u4F1A\u6E05\u7A7A",-1),_hoisted_9={key:0},_hoisted_10={class:"button-group"},_hoisted_11=createTextVNode("\u6062\u590D"),_hoisted_12=createTextVNode("\u5220\u9664"),_sfc_main={setup(i){const o=ref(new Character),p=`
{{name}}
****************************************************************************
\u79CD\u65CF\uFF1A{{race}}
\u9635\u8425\uFF1A{{align}}
\u4F53\u578B\uFF1A{{size}}
\u5E74\u9F84\uFF1A{{age}}
\u6027\u522B\uFF1A{{sex}}
\u8BED\u8A00\uFF1A{{language}}
\u8EAB\u9AD8\uFF1A{{height}}\u5C3A
\u4F53\u91CD\uFF1A{{selfWeight}}\u78C5
\u4FE1\u4EF0\uFF1A{{religion}}
\u804C\u4E1A\uFF1A{{class}}
\u7B49\u7EA7\uFF1A{{level}}
\u7ECF\u9A8C\uFF1A{{exp}}/{{levelUpExp}}
****************************************************************************
    \u6700\u7EC8\u503C \u521D\u59CB\u503C    \u79CD\u65CF\u8C03\u6574\u503C    \u5176\u5B83\u8C03\u6574\u503C
\u529B\u91CF {{STRENGTH.ability}}\uFF08{{STRENGTH.modify}}\uFF09= {{STRENGTH.base}}       +{{STRENGTH.race}}          +{{STRENGTH.other}}
\u654F\u6377 {{DEXTERITY.ability}}\uFF08{{DEXTERITY.modify}}\uFF09= {{DEXTERITY.base}}       +{{DEXTERITY.race}}          +{{DEXTERITY.other}}
\u4F53\u8D28 {{CONSTITUTION.ability}}\uFF08{{CONSTITUTION.modify}}\uFF09= {{CONSTITUTION.base}}       +{{CONSTITUTION.race}}          +{{CONSTITUTION.other}}
\u667A\u529B {{INTELLIGENCE.ability}}\uFF08{{INTELLIGENCE.modify}}\uFF09= {{INTELLIGENCE.base}}       +{{INTELLIGENCE.race}}          +{{INTELLIGENCE.other}}
\u611F\u77E5 {{WISDOM.ability}}\uFF08{{WISDOM.modify}}\uFF09= {{WISDOM.base}}       +{{WISDOM.race}}          +{{WISDOM.other}}
\u9B45\u529B {{CHARISMA.ability}}\uFF08{{CHARISMA.modify}}\uFF09= {{CHARISMA.base}}       +{{CHARISMA.race}}          +{{CHARISMA.other}}
****************************************************************************
HP {{hitPoint}}
\u9632\u5FA1\u7B49\u7EA7 {{totalAc}}\uFF0C\u63A5\u89E6 {{touchAc}}\uFF0C\u63AA\u624B\u4E0D\u53CA {{flatFootAc}}

\u5148\u653B\u8C03\u6574		{{init}}
\u57FA\u672C\u653B\u51FB\u52A0\u503C	{{bab}}
\u64D2\u62B1		{{grab}}

\u5E73\u5E38\u901F\u5EA6{{speed}}\u5C3A \u5954\u8DD1\u901F\u5EA6{{runSpeed}}\u5C3A
****************************************************************************
\u5F3A\u97E7\u8C41\u514D    {{totalFortSave}} \uFF08{{CONSTITUTION.modify}}\u4F53\u8D28\u4FEE\u6B63+{{fortSave}}\u804C\u4E1A+{{otherFortSave}}\u5176\u5B83\uFF09

\u53CD\u5C04\u8C41\u514D    {{totalRefSave}} \uFF08{{DEXTERITY.modify}}\u654F\u6377\u4FEE\u6B63+{{refSave}}\u804C\u4E1A+{{otherRefSave}}\u5176\u5B83\uFF09

\u610F\u5FD7\u8C41\u514D    {{totalWillSave}} \uFF08{{WISDOM.modify}}\u611F\u77E5\u4FEE\u6B63+{{willSave}}\u804C\u4E1A+{{otherWIllSave}}\u5176\u5B83\uFF09
****************************************************************************
\u653B\u51FB\uFF1A
{% for a in attacks %}{{a.name}} \u653B\u51FB\uFF1A{{a.attackRoll}}, \u4F24\u5BB3\uFF1A{{a.damage}}, \u91CD\u51FB\uFF1A{{a.critical}}, \u5C04\u7A0B\uFF1A{{a.range}}

{% endfor %}
****************************************************************************
\u4E13\u957F\uFF1A
{% for fate in fates %}{{fate.name}}
{{fate.describe}}

{% endfor %}
***************************************************************************
\u76D4\u7532\uFF1A
{% for a in armors %}{{a.name}} \u52A0\u503C\uFF1A{{a.bonus}}, \u6700\u5927\u654F\u6377\uFF1A{{a.maxDex}}, \u9632\u5177\u51CF\u503C\uFF1A{{a.checkPenalty}}, \u5965\u8D25\uFF1A{{a.arcaneFailure}}, \u901F\u5EA6\uFF1A{{a.speed}}
{% endfor %}
****************************************************************************
\u79CD\u65CF\u7279\u6027\u4E0E\u804C\u4E1A\u80FD\u529B\uFF1A
{% for t in traits %}{{t.name}}
{{t.describe}}

{% endfor %}
***************************************************************************
\u6280\u80FD\u70B9\uFF1A{{skillPoints}}
\u6280\u80FD	\u5206\u914D\u70B9\u6570	\u6700\u7EC8\u503C{% for s in skills %}
{{s.isClassSkill}}{{s.name}}{{s.canUseUntrained}}	\uFF08{{s.point}}\uFF09	{{s.total}}{% endfor %}

* \u975E\u53D7\u8BAD\u6280\u80FD
\u221A \u672C\u804C\u6280\u80FD
***************************************************************************
\u968F\u8EAB\u7269\u54C1\uFF1A
{% for i in items %}
{{i.name}}*{{i.count}} {{i.price}}gp {{i.weight}}\u78C5
{% endfor %}

\u8D27\u5E01\uFF1A
{{pp}}pp {{gp}}gp {{sp}}sp {{cp}}cp, \u8D27\u5E01\u603B\u91CD\uFF1A{{coinWeight}}\u78C5

\u8D1F\u91CD\uFF1A{{weight}}\u78C5, {{weightDetail}} 
\u8F7B\u8F7D\uFF1A< {{weightLimit.0}} \u4E2D\u8F7D < {{weightLimit.1}} \u91CD\u8F7D < {{weightLimit.2}}

\u7279\u6B8A\u7269\u54C1\uFF1A
{% for mi in magicItems %}{{mi.name}}
{{mi.remark}}

{% endfor %}
{% if spells.length %}
***************************************************************************
\u6CD5\u672F\uFF1A
{% for i in spells %}{{i.name}}\uFF1A{{i.spell}}

{% endfor %}
***************************************************************************
{% endif %}
`;let e=ref(new Template(p));const _=computed(()=>e.value&&e.value.render(o.value.print()));let v=ref(new LocalStorage("history",20));const C=computed(()=>LZUTF8.compress(new TextEncoder("utf-8").encode(JSON.stringify(o.value),"utf8"),{outputEncoding:"Base64"}));function V(){const g=new Blob([e.value.render(o.value.print()),`
-------- \u6307\u7EB9 --------
`,C.value],{type:"text/plain;charset=utf-8"}),h=document.createElement("a");h.href=URL.createObjectURL(g),h.download=o.value.name+".txt";try{v.value.add(o.value)}catch(f){setTimeout(()=>message.warn("\u50A8\u5B58\u5931\u8D25!")),console.log(f)}h.click()}const b=ref(!1),k=ref(!1),y=ref("");function I(){try{const g=LZUTF8.decompress(y.value,{inputEncoding:"Base64"});o.value.import(JSON.parse(g)),b.value=!1,y.value=""}catch(g){message.error("\u5BFC\u5165\u51FA\u9519!\u8BE5\u6307\u7EB9\u65E0\u6548"),console.log(g,y.value)}}return(g,h)=>{const f=resolveComponent("a-button"),s=resolveComponent("a-textarea"),x=resolveComponent("a-modal"),w=resolveComponent("a-popconfirm");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createVNode(f,{style:{background:"#FEDFE1",color:"#08192D"},type:"primary",onClick:V},{default:withCtx(()=>[_hoisted_3]),_:1}),createVNode(f,{onClick:h[0]||(h[0]=()=>k.value=!0)},{default:withCtx(()=>[_hoisted_4]),_:1}),createVNode(f,{onClick:h[1]||(h[1]=()=>b.value=!0)},{default:withCtx(()=>[_hoisted_5]),_:1})]),_hoisted_6]),createBaseVNode("div",_hoisted_7,[createBaseVNode("div",null,[createVNode(_sfc_main$1,{modelValue:o.value,"onUpdate:modelValue":h[2]||(h[2]=N=>o.value=N)},null,8,["modelValue"])]),createBaseVNode("pre",null,""+toDisplayString(unref(_))+`
-------- \u6307\u7EB9 --------
`+toDisplayString(unref(C))+`
    `,1)]),createVNode(x,{visible:b.value,"onUpdate:visible":h[4]||(h[4]=N=>b.value=N),title:"\u4ECE\u6307\u7EB9\u5BFC\u5165",onOk:I,onCancel:h[5]||(h[5]=N=>y.value="")},{default:withCtx(()=>[createVNode(s,{value:y.value,"onUpdate:value":h[3]||(h[3]=N=>y.value=N)},null,8,["value"])]),_:1},8,["visible"]),createVNode(x,{visible:k.value,"onUpdate:visible":h[6]||(h[6]=N=>k.value=N),title:"\u5386\u53F2\u4EBA\u7269\u5361",onOk:h[7]||(h[7]=()=>k.value=!1)},{default:withCtx(()=>[_hoisted_8,unref(v).data.length?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_9,"\u8FD8\u6CA1\u6709\u521B\u5EFA\u4EBA\u7269\u5361")),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(v).data,(N,U)=>(openBlock(),createElementBlock("div",{class:"history-row",key:U},[createTextVNode(toDisplayString(U+1)+". "+toDisplayString(N.name)+" ",1),createBaseVNode("div",_hoisted_10,[createVNode(f,{size:"small",onClick:()=>o.value.import(N)},{default:withCtx(()=>[_hoisted_11]),_:2},1032,["onClick"]),createVNode(w,{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:()=>unref(v).delete(U)},{default:withCtx(()=>[createVNode(f,{size:"small",danger:""},{default:withCtx(()=>[_hoisted_12]),_:1})]),_:2},1032,["onConfirm"])])]))),128))]),_:1},8,["visible"])],64)}}},cs=[AutoComplete,Button,Input,Form,Select,Collapse,Modal,Checkbox,InputNumber,Popconfirm],app=createApp(_sfc_main);cs.forEach(i=>app.use(i));app.config.globalProperties.$message=message;app.mount("#app");
