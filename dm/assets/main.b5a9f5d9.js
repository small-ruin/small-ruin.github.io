var Se=Object.defineProperty,Ie=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var F=(m,t,l)=>t in m?Se(m,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[t]=l,te=(m,t)=>{for(var l in t||(t={}))Te.call(t,l)&&F(m,l,t[l]);if(ee)for(var l of ee(t))Ne.call(t,l)&&F(m,l,t[l]);return m},ne=(m,t)=>Ie(m,ye(t));var a=(m,t,l)=>(F(m,typeof t!="symbol"?t+"":t,l),l);import{r as g,c as Ue,a as $,o as I,b as y,d as h,e as c,w as f,F as x,f as R,t as M,u as Ee,g as u,h as $e,L as Ae,m as ae,i as He,B as Me,I as De,j as Oe,S as xe,C as Re,k as Pe,P as Le}from"./vendor.78db51d6.js";function se(m){const t={};return m.forEach(l=>t[l.value]=l.label),t}const Je=[{value:"LG",label:"\u5B88\u5E8F\u5584\u826F"},{value:"NG",label:"\u4E2D\u7ACB\u5584\u826F"},{value:"CG",label:"\u6DF7\u4E71\u5584\u826F"},{value:"LN",label:"\u5B88\u5E8F\u4E2D\u7ACB"},{value:"NN",label:"\u7EDD\u5BF9\u4E2D\u7ACB"},{value:"CN",label:"\u6DF7\u4E71\u4E2D\u7ACB"},{value:"LE",label:"\u5B88\u5E8F\u90AA\u6076"},{value:"NE",label:"\u4E2D\u7ACB\u90AA\u6076"},{value:"CE",label:"\u6DF7\u4E71\u90AA\u6076"}],We=se(Je),Xe=[{value:"fine",label:"\u8D85\u5FAE\u578B"},{value:"diminutive",label:"\u5FAE\u578B"},{value:"tiny",label:"\u8D85\u5C0F\u578B"},{value:"small",label:"\u5C0F\u578B"},{value:"medium",label:"\u4E2D\u578B"},{value:"large",label:"\u5927\u578B"},{value:"huge",label:"\u8D85\u5927\u578B"},{value:"gargantuan",label:"\u5DE8\u578B"},{value:"colossal",label:"\u8D85\u5DE8\u578B"}],je=se(Xe),n={STR:"STRENGTH",DEX:"DEXTERITY",CON:"CONSTITUTION",INT:"INTELLIGENCE",WIS:"WISDOM",CHA:"CHARISMA"};n.STR+"",n.DEX+"",n.CON+"",n.INT+"",n.WIS+"",n.CHA+"";class i{constructor(t,l,b,{sub:w,subs:_,armor:C=!1}={}){this.name=t,this.baseAbility=l,this.canUseUntrained=b,this.sub=w,this.subs=_,this.armor=C}getPoint(t,{point:l=0,other:b=0},w,_=0){return!this.canUseUntrained&&l===0?"-":(w||(l=Math.floor(l/2)),l+=t[this.baseAbility]||0,l+=b,_&&(l-=_*this.armor),l)}}const Be=new i("\u4F30\u4EF7",n.INT,!0),Ge=new i("\u5E73\u8861",n.DEX,!0,{armor:1}),Ke=new i("\u552C\u9A97",n.CHA,!0),Fe=new i("\u6500\u722C",n.STR,!0,{armor:1}),ze=new i("\u4E13\u6CE8",n.CON,!0),Ve=new i("\u624B\u827A",n.INT,!0),Ye=new i("\u6587\u4EF6\u89E3\u8BFB",n.INT,!1),qe=new i("\u4EA4\u6D89",n.CHA,!0),Ze=new i("\u89E3\u9664\u88C5\u7F6E",n.INT,!1),Qe=new i("\u6613\u5BB9",n.CHA,!0),et=new i("\u9003\u8131\u672F",n.DEX,!0,{armor:1}),tt=new i("\u4F2A\u9020\u6587\u4E66",n.INT,!0),nt=new i("\u641C\u96C6\u4FE1\u606F",n.CHA,!0),at=new i("\u9A6F\u517B\u52A8\u7269",n.CHA,!1),st=new i("\u533B\u7597",n.WIS,!0),ot=new i("\u8EB2\u85CF",n.DEX,!0,{armor:!0}),lt=new i("\u5A01\u5413",n.CHA,!0),it=new i("\u8DF3\u8DC3",n.STR,!0),ct=new i("\u77E5\u8BC6(\u795E\u79D8)",n.INT,!1),rt=new i("\u77E5\u8BC6(\u5EFA\u7B51\u4E0E\u5DE5\u7A0B)",n.INT,!1),ut=new i("\u77E5\u8BC6(\u5730\u4E0B\u57CE)",n.INT,!1),dt=new i("\u77E5\u8BC6(\u5730\u7406)",n.INT,!1),mt=new i("\u77E5\u8BC6(\u5386\u53F2)",n.INT,!1),pt=new i("\u77E5\u8BC6(\u5730\u65B9)",n.INT,!1),ft=new i("\u77E5\u8BC6(\u81EA\u7136)",n.INT,!1),vt=new i("\u77E5\u8BC6(\u8D35\u65CF\u4E0E\u7687\u5BA4)",n.INT,!1),ht=new i("\u77E5\u8BC6(\u5B97\u6559)",n.INT,!1),_t=new i("\u77E5\u8BC6(\u4F4D\u9762)",n.INT,!1),kt=new i("\u8046\u542C",n.WIS,!0),bt=new i("\u6F5C\u884C",n.DEX,!0,{armor:1}),gt=new i("\u5F00\u9501",n.DEX,!1),wt=new i("\u8868\u6F14",n.CHA,!0),Ct=new i("\u4E13\u4E1A",n.WIS,!1),St=new i("\u9A91\u672F",n.DEX,!0),It=new i("\u641C\u7D22",n.INT,!0),yt=new i("\u5BDF\u8A00\u89C2\u8272",n.WIS,!0),Tt=new i("\u624B\u4E0A\u529F\u592B",n.DEX,!1,{armor:1}),Nt=new i("\u8BED\u8A00",null,!1),Ut=new i("\u8FA8\u8BC6\u6CD5\u672F",n.INT,!1),Et=new i("\u4FA6\u5BDF",n.WIS,!0),$t=new i("\u751F\u5B58",n.WIS,!0),At=new i("\u6E38\u6CF3",n.STR,!0,{armor:2}),Ht=new i("\u7FFB\u6EDA",n.DEX,!1,{armor:1}),Mt=new i("\u4F7F\u7528\u9B54\u6CD5\u88C5\u7F6E",n.CHA,!1),Dt=new i("\u7EF3\u6280",n.DEX,!0),z=[Be,Ge,Ke,Fe,ze,Ve,Ye,qe,Ze,Qe,et,tt,nt,at,st,ot,lt,it,ct,rt,ut,dt,mt,pt,ft,vt,ht,_t,kt,bt,gt,wt,Ct,St,It,yt,Tt,Nt,Ut,Et,$t,At,Ht,Mt,Dt];z.filter(m=>m.canUseUntrained).map(m=>m.name);const oe={};z.forEach(m=>oe[m.name]=m);const le=oe;class A{constructor(t){a(this,"base",10);a(this,"race",0);a(this,"other",0);this.name=t}get ability(){return this.base+this.race+this.other}get modify(){return Math.floor((this.ability-10)/2)}print(){return{name:this.name,base:this.base,race:this.race,other:this.other,ability:this.ability,modify:this.modify}}inject({base:t,race:l,other:b}){this.base=t,this.race=l,this.other=b}}class Ot{constructor(){a(this,"race",null);a(this,"align",null);a(this,"size","medium");a(this,"level",0);a(this,"classHitPoint",0);a(this,"height",5);a(this,"selfWeight",100);a(this,"STRENGTH",new A(n.STR));a(this,"DEXTERITY",new A(n.DEX));a(this,"CONSTITUTION",new A(n.CON));a(this,"INTELLIGENCE",new A(n.INT));a(this,"WISDOM",new A(n.WIS));a(this,"CHARISMA",new A(n.CHA));a(this,"skillPoints",0);a(this,"raceSkillPoint",0);a(this,"usedSkillPoints",0);a(this,"levelUpExp",0);a(this,"weightLimit",[]);a(this,"coinWeight",0);a(this,"weight",0);a(this,"weightDetail","\u8F7B\u8F7D");a(this,"skills",{});a(this,"classSkills",{});a(this,"armorSkillModify",0);a(this,"class",[{level:1}]);a(this,"customClass",[]);a(this,"fates",[{}]);a(this,"items",[{}]);a(this,"spells",[{}]);a(this,"pp",0);a(this,"gp",0);a(this,"sp",0);a(this,"cp",0);a(this,"exp",0);a(this,"hitPoint",0);a(this,"fortSave",0);a(this,"otherFortSave",0);a(this,"refSave",0);a(this,"otherRefSave",0);a(this,"willSave",0);a(this,"otherWillSave",0);a(this,"bab",0);a(this,"ac",{armor:0,other:0});a(this,"attacks",[{}]);a(this,"armors",[{}]);a(this,"traits",[{}]);a(this,"init",0);a(this,"otherInit",0);a(this,"grab",0);a(this,"otherGrab",0);a(this,"speed",30);a(this,"runSpeed",120);z.forEach(t=>this.skills[t.name]={point:0,other:0})}set(t,l){this[t]=l}print(){const t=Object.assign({},this),{align:l,size:b,traits:w,fates:_,skills:C,classSkills:P,abilityModifiers:L,armorSkillModify:D,items:O,weightLimit:T,attacks:B,armors:G,spells:K}=t;return l&&(t.align=We[l]),b&&(t.size=je[b]),t.fates=_.filter(r=>r.name||r.describe),t.traits=w.filter(r=>r.name||r.describe),t.attacks=B.filter(r=>r.name||r.describe),t.armors=G.filter(r=>r.name||r.describe),t.class=t.class.filter(r=>r.name),t.class=t.class.map(r=>`${r.name}*${r.level}`).join(" | "),t.items=O.filter(r=>r.name),t.magicItems=O.filter(r=>r.remark),t.skills=Object.keys(C).map(r=>{var W;const H=le[r],J=r in(P||{});return ne(te({name:r},C[r]),{isClassSkill:J?"\u221A":"",canUseUntrained:H.canUseUntrained?"":"*",modify:(W=this[le[r].baseAbility])==null?void 0:W.modify,total:H.getPoint(L||{},C[r],J,D)})}),t.weightLimit=[T[0],T[1]+1,T[2]+1],t.spells=K.filter(r=>r.spell).map((r,H)=>({name:H+"\u73AF",spell:r.spell})),Object.values(n).forEach(r=>{t[r]=t[r].print()}),t}import(t){Object.values(n).forEach(l=>{const b=t[l];t[l]=new A(l),t[l].inject(b)}),Object.assign(this,t)}}const xt={class:"board"},Rt={class:"pool"},Pt={class:"btn-group"},Lt=u("\u5BFC\u5165\u4EBA\u7269\u5361"),Jt=u("\u5BFC\u5165\u602A\u7269\u5361"),Wt={class:"pc"},Xt=u(" \u4EBA\u7269\u5361\u6C60\uFF1A "),jt=u("\u5220\u9664"),Bt={class:"monster"},Gt=u(" \u602A\u7269\u6C60\uFF1A "),Kt=u("\u5220\u9664"),Ft={class:"btn-group"},zt=u("\u53C2\u6218"),Vt=u("\u5168\u9009"),Yt=u("\u5168\u4E0D\u9009"),qt=u(" \u5176\u4ED6\u53EF\u80FD\u4F1A\u7528\u5230\u7684\u6307\u4EE4\uFF1A "),Zt={class:"run"},Qt={class:"mem"},en={class:"label"},tn=u(),nn=u(" \u8840\u91CF: "),an=u(" \u5148\u653B: "),sn=u(" \u4E34\u65F6\u751F\u547D: "),on=u(" \u6DE4\u4F24: "),ln=u(" pc: "),cn=u("\u589E\u52A0\u72B6\u6001"),rn={class:"damage",style:{margin:"10px 0"}},un=u(" \u751F\u6210\u6307\u4EE4\uFF1A "),dn=u("\u53D7\u4F24"),mn=u("\u6CBB\u7597"),pn=u("\u53D7\u6DE4\u4F24"),fn=u("\u66F4\u65B0"),vn=u("\u5220\u9664"),hn=u(" \u72B6\u6001: "),_n=u(" \u8F6E\u6570: "),kn=u("-"),bn=u("\u66F4\u65B0"),gn={class:"commander"},wn=u("\u751F\u6210\u547D\u4EE4"),Cn=u("\u4EA4\u6362\u5148\u653B"),Sn=u("\u5EF6\u8FDF"),In=u("\u81EA\u52A8\u8DF3\u8FC7\u56DE\u5408"),yn=u("\u81EA\u52A8\u63D0\u9192"),Tn=u("\u81EA\u52A8@"),Nn={class:"result"},Un={class:"timer"},En=u("\u4E0B\u56DE\u5408"),$n={class:"log"},An=["onClick"],Hn={setup(m){const t=g(G()),l=g(K()),b=g(""),w=g([]);g([]),g([]);const _=g({autoReminder:!0,autoAt:!0,autoJump:!0,autoJumpTime:5,silent:!0}),C=g(0),P=g(0),L=g(0),D=g(""),O=g([]),T=g(5*60);setInterval(()=>{T.value--},1e3);const B=Ue(()=>{const e=Math.floor(T.value/60%60),s=Math.round(T.value%60);return e===0&&s===0&&(T.value=5*60),e+": "+s});function G(){return JSON.parse(localStorage.getItem("pc"))||[]}function K(){return JSON.parse(localStorage.getItem("monster"))||[]}function r(e){!e||(t.value.push(e),localStorage.setItem("pc",JSON.stringify(t.value)))}function H(e){t.value.splice(e,1),localStorage.setItem("pc",JSON.stringify(t.value))}function J(e){!e||(e.monster=!0,l.value.push(e),localStorage.setItem("monster",JSON.stringify(monster.value)))}function W(e){l.value.splice(e,1),localStorage.setItem("monster",JSON.stringify(monster.value))}function Y(){try{const e=Ae.decompress(b.value.trim(),{inputEncoding:"Base64"}),s=new Ot;return s.import(JSON.parse(e)),s}catch(e){ae.error("\u5BFC\u5165\u51FA\u9519!\u8BE5\u6307\u7EB9\u65E0\u6548"),console.log(e,b.value)}}function ie(){J(Y())}function ce(){r(Y())}function q(e){return{name:e.name,init:0,hp:e.hp,temHp:0,nd:0,pc:null,conditions:[],monster:!!e.monster,checked:!1,origin:e}}function re(){const e=t.value.filter(v=>v.checked).map(q),s=l.value.filter(v=>v.checked).map(q);w.value=[...w.value,...e,...s]}function Z(e,s=!1){let v=`sb member ${s?"set":"add"} ${e.name} -h${e.hp}`;return Number.isInteger(e.init)&&(v+=` -i${e.init}`),e.pc&&(v+=` -q${e.pc}`),Number.isInteger(e.temHp)&&e.temHp>0&&(v+=` -t${e.temHp}`),_.value.silent&&(v+=" -s"),e.monster&&(v+=" -e"),v=[v],Number.isInteger(e.nd)&&e.nd>0&&v.push(`sb member nd ${e.name} ${e.nd}`),e.conditions&&(v=[...v,...e.conditions.map(p=>`sb member condition ${e.name} -c ${p.name} -r ${p.round}`)].filter(p=>p)),v}function ue(){const{autoReminder:e,autoAt:s,autoJump:v,autoJumpTime:p}=_.value;let k=`sb row 
`+w.value.reduce((S,X)=>S.concat(Z(X)),[]).join(`
`);k+=`
sb on`,e?k+=" -r":k+=" -R",v?k+=" -j":k+=" -J",s?k+=" -a":k+=" -A",k+=` -t${p}`,N(k)}function de(e){N(`sb member damage ${e.name} ${C.value}`)}function me(e){N(`sb member heal ${e.name} ${C.value}`)}function pe(e){N(`sb member nd ${e.name} ${C.value}`)}function fe(e){N(Z(e,!0))}function ve(e,s){N(`sb member condition ${e.name} -c ${s.name} -r ${s.round}`)}function he(e,s){this.mems.splice(s,1),N(`sb member delete ${e.name}`)}function N(e){Array.isArray(e)&&(e=e.join(`
`)),D.value=e,O.value.push(e)}function _e(){const[e,s]=w.value.filter(v=>v.checked);N([`sb init switch ${e.name} ${s.name}`,`sb init switch ${s.name} ${e.name}`])}function ke(){const[e,s]=w.value.filter(v=>v.checked);N([`sb member delay ${e.name} ${s.name}`,`sb member delay ${s.name} ${e.name}`])}function be(){t.value.forEach(e=>e.checked=!0),l.value.forEach(e=>e.checked=!0)}function ge(){t.value.forEach(e=>e.checked=!1),l.value.forEach(e=>e.checked=!1)}function U(e){navigator.clipboard.writeText(e)}return(e,s)=>{const v=$("a-textarea"),p=$("a-button"),k=$("a-checkbox"),S=$("a-input-number"),X=$("a-input"),we=$("a-form-item"),Ce=$("a-form");return I(),y("div",xt,[h("section",Rt,[c(v,{value:b.value,"onUpdate:value":s[0]||(s[0]=o=>b.value=o)},null,8,["value"]),h("div",Pt,[c(p,{onClick:ce},{default:f(()=>[Lt]),_:1}),c(p,{onClick:ie},{default:f(()=>[Jt]),_:1})]),h("div",Wt,[Xt,(I(!0),y(x,null,R(t.value,(o,E)=>(I(),y("div",{key:o.name},[c(k,{checked:o.checked,"onUpdate:checked":d=>o.checked=d},{default:f(()=>[u(M(o.name),1)]),_:2},1032,["checked","onUpdate:checked"]),c(p,{onClick:d=>H(E),size:"small"},{default:f(()=>[jt]),_:2},1032,["onClick"])]))),128))]),h("div",Bt,[Gt,(I(!0),y(x,null,R(l.value,(o,E)=>(I(),y("div",{key:o.name},[c(k,{checked:o.checked,"onUpdate:checked":d=>o.checked=d},{default:f(()=>[u(M(o.name),1)]),_:2},1032,["checked","onUpdate:checked"]),c(p,{onClick:d=>W(E),size:"small"},{default:f(()=>[Kt]),_:2},1032,["onClick"])]))),128))]),h("div",Ft,[c(p,{onClick:re,type:"primary"},{default:f(()=>[zt]),_:1}),c(p,{onClick:be},{default:f(()=>[Vt]),_:1}),c(p,{onClick:ge},{default:f(()=>[Yt]),_:1})]),h("div",null,[qt,h("pre",{onClick:s[1]||(s[1]=()=>U("sb member list"))},"sb member list -a"),h("pre",{onClick:s[2]||(s[2]=()=>U("sb init list -a"))},"sb init list -a"),h("pre",{onClick:s[3]||(s[3]=()=>U("sb on"))},"sb on"),h("pre",{onClick:s[4]||(s[4]=()=>U("sb next"))},"sb next"),h("pre",{onClick:s[5]||(s[5]=()=>U("sb pause"))},"sb pause"),h("pre",{onClick:s[6]||(s[6]=()=>U("sb end"))},"sb end")])]),h("section",Zt,[h("div",Qt,[c(Ce,null,{default:f(()=>[(I(!0),y(x,null,R(w.value,(o,E)=>(I(),$e(we,{key:E},{default:f(()=>[h("div",en,[h("b",null,M(o.name),1),tn,c(k,{checked:o.checked,"onUpdate:checked":d=>o.checked=d},null,8,["checked","onUpdate:checked"])]),nn,c(S,{value:o.hp,"onUpdate:value":d=>o.hp=d},null,8,["value","onUpdate:value"]),an,c(S,{value:o.init,"onUpdate:value":d=>o.init=d},null,8,["value","onUpdate:value"]),sn,c(S,{value:o.temHp,"onUpdate:value":d=>o.temHp=d},null,8,["value","onUpdate:value"]),on,c(S,{value:o.nd,"onUpdate:value":d=>o.nd=d},null,8,["value","onUpdate:value"]),ln,c(X,{style:{width:"200px"},value:o.pc,"onUpdate:value":d=>o.pc=d},null,8,["value","onUpdate:value"]),c(p,{style:{"margin-left":"10px"},onClick:d=>o.conditions.push({name:"",round:0}),type:"primary"},{default:f(()=>[cn]),_:2},1032,["onClick"]),h("div",rn,[un,c(S,{value:C.value,"onUpdate:value":s[7]||(s[7]=d=>C.value=d)},null,8,["value"]),c(p,{onClick:()=>de(o)},{default:f(()=>[dn]),_:2},1032,["onClick"]),c(S,{value:P.value,"onUpdate:value":s[8]||(s[8]=d=>P.value=d)},null,8,["value"]),c(p,{onClick:()=>me(o)},{default:f(()=>[mn]),_:2},1032,["onClick"]),c(S,{value:L.value,"onUpdate:value":s[9]||(s[9]=d=>L.value=d)},null,8,["value"]),c(p,{onClick:()=>pe(o)},{default:f(()=>[pn]),_:2},1032,["onClick"]),c(p,{onClick:()=>fe(o)},{default:f(()=>[fn]),_:2},1032,["onClick"]),c(p,{danger:"",onClick:()=>he(o,E)},{default:f(()=>[vn]),_:2},1032,["onClick"])]),(I(!0),y(x,null,R(o.conditions,(d,Q)=>(I(),y("div",{style:{margin:"10px 0"},key:Q},[hn,c(X,{style:{width:"200px"},value:d.name,"onUpdate:value":j=>d.name=j},null,8,["value","onUpdate:value"]),_n,c(S,{value:d.round,"onUpdate:value":j=>d.round=j},null,8,["value","onUpdate:value"]),c(p,{type:"primary",style:{"margin-left":"10px"},onClick:j=>o.conditions.splice(Q,1)},{default:f(()=>[kn]),_:2},1032,["onClick"]),c(p,{type:"primary",style:{"margin-left":"10px"},onClick:()=>ve(o,d)},{default:f(()=>[bn]),_:2},1032,["onClick"])]))),128))]),_:2},1024))),128))]),_:1})]),h("div",gn,[c(p,{onClick:ue},{default:f(()=>[wn]),_:1}),c(p,{onClick:_e},{default:f(()=>[Cn]),_:1}),c(p,{onClick:ke},{default:f(()=>[Sn]),_:1}),h("div",null,[c(k,{checked:_.value.autoJump,"onUpdate:checked":s[10]||(s[10]=o=>_.value.autoJump=o)},{default:f(()=>[In]),_:1},8,["checked"]),c(k,{checked:_.value.autoReminder,"onUpdate:checked":s[11]||(s[11]=o=>_.value.autoReminder=o)},{default:f(()=>[yn]),_:1},8,["checked"]),c(k,{checked:_.value.autoAt,"onUpdate:checked":s[12]||(s[12]=o=>_.value.autoAt=o)},{default:f(()=>[Tn]),_:1},8,["checked"]),c(S,{value:_.value.autoJumpTime,"onUpdate:value":s[13]||(s[13]=o=>_.value.autoJumpTime=o)},null,8,["value"])]),h("pre",{onClick:s[14]||(s[14]=()=>U(D.value))},M(D.value),1)])]),h("section",Nn,[h("div",Un,M(Ee(B)),1),c(p,{onClick:s[15]||(s[15]=o=>T.value=5*60)},{default:f(()=>[En]),_:1}),h("div",$n,[(I(!0),y(x,null,R(O.value,(o,E)=>(I(),y("pre",{onClick:()=>U(o),key:E},M(o),9,An))),128))])])])}}};const Mn=[Me,De,Oe,xe,Re,Pe,Le],V=He(Hn);Mn.forEach(m=>V.use(m));V.config.globalProperties.$message=ae;V.mount("#app");
